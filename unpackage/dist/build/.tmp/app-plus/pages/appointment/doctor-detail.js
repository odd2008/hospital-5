(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/appointment/doctor-detail"],{"7d94":function(t,e,a){"use strict";a.r(e);var i=a("a150"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=o.a},"900b":function(t,e,a){},a150:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a("2f62");function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o={data:function(){return{appointTimes:[],weekValues:["周一","周二","周三","周四","周五","周六","周日"],doctorInfo:{headImageUrl:"../../static/uni-center/logo.png",name:"",department:"",position:"",appointNum:0,rate:0,id:0,skills:""},publicPath:this.$constants.IMAGE_PUBLIC_PATH,recommendInfo:[],commentInfo:[]}},onLoad:function(e){this.doctorInfo.name=e.name,this.doctorInfo.position=e.position,t.setNavigationBarTitle({title:"".concat(e.position," - ").concat(e.name)}),this.loadData(e.id)},onReady:function(){},onPullDownRefresh:function(){console.log("refresh"),this.loadData(this.doctorInfo.id)},methods:{goCommentDetail:function(){t.navigateTo({url:"comment-detail?targetId=".concat(this.doctorInfo.id,"&targetType=1")})},goDetail:function(e){t.navigateTo({url:"/pages/appointment/doctor-detail?name=".concat(e.name,"&position=").concat(e.position,"&id=").concat(e.id)})},appointFull:function(){t.showToast({title:"已约满，请选择其他时间",icon:"none",duration:2e3})},goOrder:function(e){var a="".concat(e.appointDate,"(").concat(e.weekDay,")").concat(e.timeSpan);t.navigateTo({url:"appointment-order?doctorId=".concat(this.doctorInfo.id,"&appointTimeId=").concat(e.id,"&time=").concat(a,"&price=").concat(e.price)})},loadData:function(t){console.log(t),this.getDoctorDetail(t),this.getAppointData(t),this.getCommentInfo(t),this.getRecommendDoctor()},getDoctorDetail:function(t){var e=this;this.$requestWithToken({url:"/appointment/getDoctorDetail",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{id:t},succeed:function(t){"success"===t.status&&(e.doctorInfo=t.data,null!==e.doctorInfo.headImageUrl&&0!==e.doctorInfo.headImageUrl.length||(e.doctorInfo.headImageUrl="../../static/uni-center/logo.png"))}})},getRecommendDoctor:function(){var e=this;this.$requestWithToken({url:"/appointment/getRecommendDoctor",header:{"Content-Type":"application/x-www-form-urlencoded"},succeed:function(a){"success"===a.status&&(e.recommendInfo=a.data),t.stopPullDownRefresh()}})},getAppointData:function(t){var e=this;this.$requestWithToken({url:"/appointment/getAppointTime",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{doctorId:t},succeed:function(t){if("success"===t.status){e.appointTimes=[];var a=!0,o=!1,n=void 0;try{for(var s,c=t.data[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var r=s.value,l=new Date;l.setFullYear(r.appointDate.split("-")[0]),l.setMonth(parseInt(r.appointDate.split("-")[1])-1),l.setDate(r.appointDate.split("-")[2]);var u=new Date,d=parseInt(parseInt(l-u)/1e3/60/60/24);e.appointTimes.push(i({appointDate:r.appointDate,timeSpan:r.timeSpan,price:r.price,id:r.id,totalNum:r.totalNum,appointNum:r.appointNum,weekDay:e.weekValues[l.getDay()-1],remainDate:d},"id",r.id))}}catch(p){o=!0,n=p}finally{try{a||null==c.return||c.return()}finally{if(o)throw n}}}}})},getCommentInfo:function(e){var a=this;this.$requestWithToken({url:"/appointment/getComment",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{targetId:e,targetType:1},succeed:function(e){"success"===e.status?a.commentInfo=e.data.slice(0,4):t.showToast({title:"网络错误，请重试",icon:"none",duration:2e3})}})}}};e.default=o}).call(this,a("6e42")["default"])},a629:function(t,e,a){"use strict";var i=a("900b"),o=a.n(i);o.a},c279:function(t,e,a){"use strict";a.r(e);var i=a("f8cb"),o=a("7d94");for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);a("a629");var s=a("2877"),c=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"1d1c95c4",null);e["default"]=c.exports},c67b:function(t,e,a){"use strict";a("bc08");var i=n(a("b0ce")),o=n(a("c279"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(o.default))},f8cb:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"center"},[a("view",{staticClass:"logo"},[a("view",{staticClass:"logo-top"},[a("image",{staticClass:"logo-img",attrs:{src:t.doctorInfo.headImageUrl}}),a("view",{staticClass:"logo-title"},[a("view",{staticStyle:{height:"70rpx","padding-top":"10rpx","box-sizing":"border-box"}},[a("view",{staticClass:"uer-name flex"},[a("view",{staticStyle:{width:"120rpx","font-size":"35rpx"}},[t._v(t._s(t.doctorInfo.name))]),a("view",{staticClass:"cu-tag round line-white sm",staticStyle:{"margin-top":"13rpx"}},[t._v(t._s(t.doctorInfo.department))]),a("view",{staticClass:"cu-tag round line-white sm",staticStyle:{"margin-top":"13rpx"}},[t._v(t._s(t.doctorInfo.position))])])]),a("view",{staticStyle:{height:"50rpx"}},[a("view",{staticClass:"uer-name flex",staticStyle:{"font-size":"25rpx"}},[a("view",{staticStyle:{width:"200rpx"}},[t._v("预约量："+t._s(t.doctorInfo.appointNum))]),a("view",{},[t._v("评分："+t._s(t.doctorInfo.rate))])])])])]),a("view",[a("view",{staticClass:"uer-name",staticStyle:{"font-size":"25rpx","line-height":"30rpx","margin-top":"30rpx"}},[t._v("简介："+t._s(t.doctorInfo.skills))])])]),t._m(0),a("view",{staticClass:"cu-list menu-avatar"},t._l(t.appointTimes,function(e,i){return a("view",{key:i,staticClass:"cu-item",staticStyle:{height:"200rpx","border-bottom":"1rpx solid #eee"}},[a("view",{staticClass:"content",staticStyle:{left:"60rpx"}},[a("view",{staticClass:"text-black flex"},[a("view",{staticStyle:{width:"160rpx"}},[t._v(t._s(e.appointDate))]),a("view",{staticStyle:{width:"70rpx"}},[t._v(t._s(e.weekDay))]),a("view",{staticStyle:{width:"70rpx"}},[t._v(t._s(e.timeSpan))]),a("view",{staticClass:"cu-tag round line-cyan sm"},[t._v(t._s(e.remainDate)+"天后")])]),a("view",{staticClass:"text-gray text-sm flex"},[a("view",{},[t._v(t._s(t.doctorInfo.position))]),a("view",{staticStyle:{color:"#e54d42","margin-left":"20rpx"}},[t._v(t._s(e.price)+"元")]),a("view",{staticStyle:{color:"#fbbd08","margin-left":"30rpx"}},[t._v("剩余："+t._s(e.totalNum-e.appointNum))])])]),a("view",{staticClass:"action"},[e.totalNum===e.appointNum?a("view",{staticClass:"cu-tag radius bg-grey",attrs:{eventid:"0e21e8c9-1-"+i},on:{click:t.appointFull}},[t._v("约满")]):a("view",{staticClass:"cu-tag radius bg-cyan",attrs:{eventid:"0e21e8c9-0-"+i},on:{click:function(a){t.goOrder(e)}}},[t._v("预约")])])])})),a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[t._m(1),a("view",{staticClass:"action",attrs:{eventid:"0e21e8c9-2"},on:{click:function(e){t.goCommentDetail()}}},[a("text",{staticClass:"cuIcon-right text-grey"})])]),a("view",{staticClass:"cu-list menu-avatar comment solids-top"},t._l(t.commentInfo,function(e,i){return a("view",{key:i,staticClass:"cu-item"},[a("view",{staticClass:"cu-avatar round",style:"background-image:url("+t.publicPath+e.user.headImageUrl+");"}),a("view",{staticClass:"content"},[a("view",{staticClass:"text-grey"},[t._v(t._s(e.user.name))]),a("view",{staticClass:"text-gray text-content text-df"},[t._v(t._s(e.comment.content))]),a("view",{staticClass:"margin-top-sm flex justify-between"},[a("view",{staticClass:"text-gray text-df"},[t._v(t._s(e.comment.publishDate))]),a("view",{staticClass:"text-yellow text-df"},[t._v(t._s(e.comment.rate)+".0")])])])])})),t._m(2),a("view",{staticClass:"cu-list menu-avatar",staticStyle:{"margin-bottom":"50rpx"}},t._l(t.recommendInfo,function(e,i){return a("view",{key:i,staticClass:"cu-item",staticStyle:{height:"200rpx","border-bottom":"1rpx solid #eee"},attrs:{eventid:"0e21e8c9-3-"+i},on:{click:function(a){t.goDetail(e)}}},[a("view",{staticClass:"cu-avatar round lg",style:"background-image:url("+e.headImageUrl+");"}),a("view",{staticClass:"content"},[a("view",{staticClass:"text-black"},[a("text",[t._v(t._s(e.name))]),a("text",{staticClass:"cu-tag round sm bg-orange",staticStyle:{"margin-left":"30rpx"}},[t._v(t._s(e.position))])]),a("view",{staticClass:"flex"},[a("view",{staticClass:"text-grey text-sm",staticStyle:{color:"#fbbd08"}},[t._v("评分："+t._s(e.rate))]),a("view",{staticClass:"text-grey text-sm",staticStyle:{"margin-left":"30rpx"}},[t._v("预约量："+t._s(e.appointNum))])]),a("view",{staticClass:"text-gray text-sm flex"},[a("text",{staticClass:"text-cut"},[t._v(t._s(e.skills))])])]),a("view",{staticClass:"action text-gray text-cut",staticStyle:{width:"150rpx","text-align":"right","box-sizing":"border-box","padding-right":"10rpx"}},[a("text",{staticClass:"text-sm"},[t._v(t._s(e.department))])])])}))])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[a("view",{staticClass:"action"},[a("text",{staticClass:"cuIcon-timefill text-grey"}),t._v("本月")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"action"},[a("text",{staticClass:"cuIcon-commentfill text-grey"}),t._v("医师评价")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[a("view",{staticClass:"action"},[a("text",{staticClass:"cuIcon-discoverfill text-grey"}),t._v("推荐医师")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})}},[["c67b","common/runtime","common/vendor"]]]);