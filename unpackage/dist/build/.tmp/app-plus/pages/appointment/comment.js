(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/appointment/comment"],{"4d1f":function(t,e,a){"use strict";var o=a("7daf"),n=a.n(o);n.a},6200:function(t,e,a){"use strict";a("bc08");var o=s(a("b0ce")),n=s(a("9c0b"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(n.default))},"65d9":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{CustomBar:this.CustomBar,loadProgress:0,modalName:null,stars:[1,2,3,4,5,6,7,8,9,10],doctorInfo:{rate:0,content:""},departInfo:{rate:0,content:""},doctorId:0}},onLoad:function(t){this.LoadProgress(),this.doctorId=t.id,this.loadData()},onReady:function(){},methods:{commentDoctorInput:function(t){this.doctorInfo.content=t.detail.value},commentDepartInput:function(t){this.departInfo.content=t.detail.value},chooseDoctorStar:function(t){this.doctorInfo.rate=t},chooseDepartStar:function(t){this.departInfo.rate=t},LoadProgress:function(){var t=this;this.loadProgress=this.loadProgress+3,this.loadProgress<100?setTimeout(function(){t.LoadProgress()},40):this.loadProgress=0},loadData:function(){var e=this;this.$requestWithToken({url:"/appointment/getCurrentContent",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{doctorId:this.doctorId},succeed:function(a){"success"===a.status?(console.log(JSON.stringify(a.data)),e.doctorInfo.rate=a.data.doctor.rate,e.doctorInfo.content=a.data.doctor.content,e.departInfo.rate=a.data.depart.rate,e.departInfo.content=a.data.depart.content):t.showToast({title:"网络错误，请重试",icon:"none",duration:2e3})}})}},onNavigationBarButtonTap:function(){if(0!==this.doctorInfo.rate&&0!==this.departInfo.rate)if(0!==this.doctorInfo.content.trim().length&&0!==this.departInfo.content.trim().length){var e=new Date,a=[{content:this.doctorInfo.content,publishDate:"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),rate:this.doctorInfo.rate,targetType:1,targetId:this.doctorId},{content:this.departInfo.content,publishDate:"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),rate:this.departInfo.rate,targetType:2,targetId:this.doctorId}];this.$requestWithToken({url:"/appointment/addContent",header:{"Content-Type":"application/x-www-form-urlencoded"},data:a[0],succeed:function(e){"success"===e.status||t.showToast({title:"网络错误，请重试",icon:"none",duration:2e3})}}),this.$requestWithToken({url:"/appointment/addContent",header:{"Content-Type":"application/x-www-form-urlencoded"},data:a[1],succeed:function(e){"success"===e.status?(t.showToast({title:"评论成功",icon:"none",duration:1e3}),t.navigateBack({delta:1})):t.showToast({title:"网络错误，请重试",icon:"none",duration:2e3})}})}else t.showToast({title:"请先评论",icon:"none",duration:2e3});else t.showToast({title:"请先评分",icon:"none",duration:2e3})}};e.default=a}).call(this,a("6e42")["default"])},"71ec":function(t,e,a){"use strict";a.r(e);var o=a("65d9"),n=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);e["default"]=n.a},"7daf":function(t,e,a){},"7e5a":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticStyle:{"margin-bottom":"60rpx"}},[t._m(0),a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[a("view",{staticClass:"feedback-title feedback-star-view",staticStyle:{display:"flex"}},[a("view",{staticStyle:{"margin-left":"30rpx",color:"#333333"}},[t._v("评分")]),a("view",{staticClass:"feedback-star-view"},t._l(t.stars,function(e,o){return a("text",{key:o,staticClass:"feedback-star",class:o<t.doctorInfo.rate?"active":"",attrs:{eventid:"fc82342e-0-"+o},on:{tap:function(a){t.chooseDoctorStar(e)}}})}))])]),a("view",[a("view",{staticClass:"cu-form-group align-start",staticStyle:{height:"400rpx"}},[a("view",{staticClass:"title"},[t._v("评价")]),a("textarea",{staticStyle:{height:"350rpx"},attrs:{maxlength:"-1",disabled:null!=t.modalName,value:t.doctorInfo.content,placeholder:"请输入评论",eventid:"fc82342e-1"},on:{input:t.commentDoctorInput}})])]),t._m(1),a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[a("view",{staticClass:"feedback-title feedback-star-view",staticStyle:{display:"flex"}},[a("view",{staticStyle:{"margin-left":"30rpx",color:"#333333"}},[t._v("评分")]),a("view",{staticClass:"feedback-star-view"},t._l(t.stars,function(e,o){return a("text",{key:o,staticClass:"feedback-star",class:o<t.departInfo.rate?"active":"",attrs:{eventid:"fc82342e-2-"+o},on:{tap:function(a){t.chooseDepartStar(e)}}})}))])]),a("view",[a("view",{staticClass:"cu-form-group align-start",staticStyle:{height:"400rpx"}},[a("view",{staticClass:"title"},[t._v("评价")]),a("textarea",{staticStyle:{height:"350rpx"},attrs:{maxlength:"-1","adjust-position":"true",disabled:null!=t.modalName,value:t.departInfo.content,placeholder:"请输入评论",eventid:"fc82342e-3"},on:{input:t.commentDepartInput}})])]),a("view",{staticClass:"load-progress",class:0!=t.loadProgress?"show":"hide",style:[{top:t.CustomBar+"px"}]},[a("view",{staticClass:"load-progress-bar bg-orange",style:[{transform:"translate3d(-"+(100-t.loadProgress)+"%, 0px, 0px)"}]})])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[a("view",{staticClass:"action"},[a("text",{staticClass:"cuIcon-titles text-orange"}),t._v("医师评价")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[a("view",{staticClass:"action"},[a("text",{staticClass:"cuIcon-titles text-orange"}),t._v("科室评价")])])}];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},"9c0b":function(t,e,a){"use strict";a.r(e);var o=a("7e5a"),n=a("71ec");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("4d1f");var r=a("2877"),i=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"a86eb85e",null);e["default"]=i.exports}},[["6200","common/runtime","common/vendor"]]]);